{"ast":null,"code":"var _jsxFileName = \"E:\\\\Final project\\\\Airline system-frontend - Copy\\\\src\\\\screens\\\\ShowBookingsScreen.js\";\nimport React, { Component } from \"react\";\nimport FlightAPIService from \"../service/FlightAPIService\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ShowBookingScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookings: [],\n      message: null\n    };\n    this.cancelBooking = this.cancelBooking.bind(this);\n    this.reloadBookingList = this.reloadBookingList.bind(this);\n  }\n  componentDidMount() {\n    this.reloadBookingList();\n  }\n  reloadBookingList() {\n    FlightAPIService.getBookingsByFlightId(window.sessionStorage.getItem(\"aid\")).then(res => {\n      console.log(res);\n      if (res.data.status == \"success\") this.setState({\n        bookings: res.data.data\n      });else this.props.history.push(\"/manager\");\n      console.log(this.state.bookings);\n    });\n  }\n  cancelBooking(bookingId) {\n    FlightAPIService.cancelBookingByBookId(bookingId).then(res => {\n      this.setState({\n        message: \"Booking cancelled successfully.\"\n      });\n      this.setState({\n        bookings: this.state.bookings.filter(booking => booking.bookingId !== bookingId)\n      });\n      if (this.state.bookings == 0) this.props.history.push('/manager');\n    });\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-center\",\n        children: \"Bookings\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"table table-striped\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"hidden\",\n              children: \"Booking Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 47,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Airline Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"User Id\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 49,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Booking Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 50,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Departure Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 51,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Arrival Date\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 52,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Total Fare\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 54,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: this.state.bookings.map(booking => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.bookingId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.airlineId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.userId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.bookingDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.journeyDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.arrivalDate\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: booking.totalFare\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-success\",\n                onClick: () => this.cancelBooking(booking.bookingId),\n                children: [\" \", \"Cancel Booking\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 68,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 17\n            }, this)]\n          }, booking.bookingId, true, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default ShowBookingScreen;","map":{"version":3,"names":["React","Component","FlightAPIService","jsxDEV","_jsxDEV","ShowBookingScreen","constructor","props","state","bookings","message","cancelBooking","bind","reloadBookingList","componentDidMount","getBookingsByFlightId","window","sessionStorage","getItem","then","res","console","log","data","status","setState","history","push","bookingId","cancelBookingByBookId","filter","booking","render","children","className","fileName","_jsxFileName","lineNumber","columnNumber","map","airlineId","userId","bookingDate","journeyDate","arrivalDate","totalFare","onClick"],"sources":["E:/Final project/Airline system-frontend - Copy/src/screens/ShowBookingsScreen.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport FlightAPIService from \"../service/FlightAPIService\";\n\nclass ShowBookingScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      bookings: [],\n      message: null,\n    };\n    this.cancelBooking = this.cancelBooking.bind(this);\n    this.reloadBookingList = this.reloadBookingList.bind(this);\n  }\n\n  componentDidMount() {\n    this.reloadBookingList();\n  }\n\n  reloadBookingList() {\n    FlightAPIService.getBookingsByFlightId(window.sessionStorage.getItem(\"aid\"))\n        .then((res) => {\n          console.log(res);\n          if (res.data.status == \"success\")\n            this.setState({ bookings: res.data.data });\n          else this.props.history.push(\"/manager\");\n          console.log(this.state.bookings);\n    });\n  }\n\n  cancelBooking(bookingId) {\n    FlightAPIService.cancelBookingByBookId(bookingId).then((res) => {\n      this.setState({ message: \"Booking cancelled successfully.\" });\n      this.setState({\n        bookings: this.state.bookings.filter((booking) => booking.bookingId !== bookingId),\n      });\n      if(this.state.bookings==0)\n      this.props.history.push('/manager')\n    });\n  }\n  render() {\n    return (\n      <div>\n        <h2 className=\"text-center\">Bookings</h2>\n        <table className=\"table table-striped\">\n          <thead>\n            <tr>\n              <th className=\"hidden\">Booking Id</th>\n              <th>Airline Id</th>\n              <th>User Id</th>\n              <th>Booking Date</th>\n              <th>Departure Date</th>\n              <th>Arrival Date</th>\n              <th>Total Fare</th>\n              <th>Action</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.state.bookings.map((booking) => (\n              <tr key={booking.bookingId}>\n                <td>{booking.bookingId}</td>\n                <td>{booking.airlineId}</td>\n                <td>{booking.userId}</td>\n                <td>{booking.bookingDate}</td>\n                <td>{booking.journeyDate}</td>\n                <td>{booking.arrivalDate}</td>\n                <td>{booking.totalFare}</td>\n                <td>\n                  <button\n                    className=\"btn btn-success\"\n                    onClick={() => this.cancelBooking(booking.bookingId)}\n                  >\n                    {\" \"}\n                    Cancel Booking\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default ShowBookingScreen;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}